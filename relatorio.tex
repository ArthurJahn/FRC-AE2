
\documentclass[a4paper]{report} %padrao letterpaper, 10pt
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage{amsfonts,amssymb,graphicx,enumerate}
\usepackage[centertags]{amsmath}
% Configuracoes de pagina
\usepackage[lmargin=3cm,rmargin=3cm,tmargin=3cm,bmargin=3cm]{geometry}
% Layout da pagina
\usepackage{hyperref}
% Layout para código
\usepackage{listings}
% Font for code style
\usepackage{courier}
% The 68 standard colors known to dvips
\usepackage[usenames,dvipsnames]{xcolor}
\hypersetup{pdfpagelayout=SinglePage, % ou TwoPageLeft
    colorlinks=true,
    pdftitle={Relatório de asuhaush Redes},
    pdfauthor={Áulus Diniz, Arthur Jahn}}

%*******************************************************
\definecolor{light-gray}{gray}{0.90}
\lstset{
  backgroundcolor=\color{light-gray},
  basicstyle=\footnotesize\ttfamily
}

\title{Fundamentos de Redes de Computadores: Camada de transporte}
\author{Arthur Jahn, Áulus Diniz}
\date{26 de Outubro de 2015}    %para ocultar a data digite: \date{ }
%*******************************************************
\begin{document}    %Inicio do documento
\maketitle  %cria o titulo na capa

\tableofcontents %Sumario
%-------------------------------------------------------
\chapter{Protocolos de Camada de Aplicação}
\label{chap_primeiro} %rotulo que pode ser usado em referencia cruzada

\section{Monitoramento e Coleta de Pacotes}
\label{sec_primeiro_monitoramento}

	Para	se capturar os pacotes recebidos e enviados pela rede, foi utilizada a ferramenta \textit{tshark}, uma versão para terminal de comandos que possui todas as opções da ferramenta de interface gráfica \textit{WireShark}, ambas ferramentas de monitoramento e diagnóstico de redes.

	Nos experimentos efetuados para este trabalho, foi utilizada uma distribuição Linux Debian versão 7.9 e para tal, os seguintes passos foram necessários para instalação e configuração do ambiente de experimentação e documentação.
\begin{lstlisting}[language=bash]

	sudo aptitude install tshark

	sudo aptitude install texlive

	sudo aptitude install texlive-lang-portuguese


\end{lstlisting}

	Para que fosse possível analisar os pacotes específicos de cada protocolo da camada de aplicação, foi necessário analisar o tipo de pacote que deveria ser capturado segundo os protocolos de transporte utilizados. No caso de pacotes transmitidos pelo protocolo DNS da camada de aplicação, é necessário capturar apenas pacotes que utilizem na camada de transporte protocolo UDP e que possuam 53 como número de porta de destino. Já para capturar pacotes HTTP, é necessário restringir os pacotes para aqueles que utilizem na camada inferior, protocolo TCP e que tenham 80 como número de porta de destino. O protocolo FTP
também utiliza protocolo TCP para transporte, mas tem como porta de destino o número 21.

	Nesse sentido, e utilizando as opções disponíveis para captura de pacotes da aplicação de diagnóstico \textit{tshark}, foram definidos os comandos necessários para se filtrar os pacotes capturados para cada um dos protocolos da camada de aplicação descritos acima, foram estes respectivamente:
\begin{lstlisting}[language=bash]

	tshark udp port 53

	tshark tcp port 80

	tshark tcp port 21

\end{lstlisting}

	Além dos comandos necessários para captura de pacotes, tem de se especificar um arquivo para direcionar a saída do comando executado, resultando nos seguintes comandos finais utilizados:
\begin{lstlisting}[language=bash]

	tshark udp port 53 > outputDNS.txt

	tshark tcp port 80 > outputHTTP.txt

	tshark tcp port 21 > outputFTP.txt

\end{lstlisting}

\section{Protocolo DNS}
\label{sec_dns}
		O DNS provê serviços de resolução de \textit{hosts} por meio da tradução de nomes de domínios em números de endereçamento IP. Como um mesmo domínio pode estar vinculado a vários endereços IP, esse serviço pode ser responsável também por distribuição de carga entre os \textit{hosts} de destino, alternando o endereço fornecido ao cliente quando uma solicitação de resolução de domínio é feita. Uma consulta DNS consiste basicamente de uma requisição enviada pelo cliente seguida de uma resposta devolvida pelo servidor. Nesse sentido, é interessante a utilização de um protocolo de transporte sem estabelecimento de conexão como o UDP para não acarretar em um atraso na requisição, como no caso do protocolo TCP que necessita de um \textit{handshake} de três vias.

		O serviço de DNS utiliza normalmente a porta 53, sendo esta observada na captura dos pacotes coletados.
\subsection{Dados coletados e Análise}
\label{sub_dns_dados}

Após a execução do comando de captura de pacotes especificado na seção anterior, foi aberto um novo terminal para teste de captura com o comando wget apontando para o nome de domínio do site tcpdump:
\begin{lstlisting}[language=bash]

	wget http://tcpdump.org/

\end{lstlisting}

	No arquivo de captura obteve-se os seguintes pacotes registrados:

\begin{lstlisting}[language=bash]

	0.000000    10.0.2.15 -> 201.10.1.4   DNS 75 Standard query 0x1e44
  A www.tcpdump.org
	0.000124    10.0.2.15 -> 201.10.1.4   DNS 75 Standard query 0xde66
  AAAA www.tcpdump.org
	0.350827   201.10.1.4 -> 10.0.2.15    DNS 131 Standard query response 0xde66
  AAAA 2001:4830:116e:2::6 AAAA 2607:f0b0:c:200::66
	0.356026   201.10.1.4 -> 10.0.2.15    DNS 107 Standard query response 0x1e44
  A 132.213.238.6 A 192.139.46.66

\end{lstlisting}

	Os pacotes enviados do cliente (IP 10.0.2.15) foram enviados ao \textit{host} de destino com IP 201.10.1.4 que respondeu às solicitações. É importante ressaltar que foram enviadas duas requisições do cliente, e as respostas do servidor DNS continham um identificador IPv6 no primeiro pacote recebido e um IPv4 no segundo. Como especificado na RFC 1886, que descreve sobre a adição de IPv6 com o registro AAAA em consultas DNS \cite{IETF}.

\section{Protocolo HTTP}
\label{sec_http}
Aqui vai algo sobre o protocolo http.
\subsection{Dados coletados}
\label{sub_http_dados}
Aqui vão os dados coletados para o protocolo HTTP.

\subsection{Análise}
\label{sub_http_analise}
Aqui vai a análise dos dados coletados para o protocolo HTTP.

\section{Protocolo FTP}
\label{sec_ftp}
Aqui vai algo sobre o protocolo ftp.
\subsection{Dados coletados}
\label{sub_ftp_dados}
Aqui vão os dados coletados para o protocolo FTP.

\subsection{Análise}
\label{sub_ftp_analise}
Aqui vai a análise dos dados coletados para o protocolo FTP.

%-------------------------------------------------------
\chapter{Ferramentas de Diagnóstico de Redes}
\label{chap_segundo}

\section{Monitoramento e Coleta de Pacotes}
\label{sec_segundo_monitoramento}

Aqui deve vir o processo de preparação para o monitoramento e captura de pacotes para as ferramentas de
diagnóstico de redes. Sendo estas:
\begin{enumerate}[a)]
 \item Traceroute;
 \item Ping;
 \item Nmap;
\end{enumerate}

\section{Traceroute}
\label{sec_traceroute}
Aqui vai algo sobre o traceroute.
\subsection{Dados coletados}
\label{sub_traceroute_dados}
Aqui vão os dados coletados para a ferramenta traceroute.

\subsection{Análise}
\label{sub_traceroute_analise}
Aqui vai a análise dos dados coletados para a ferramenta traceroute.

\section{Ping}
\label{sec_ping}
Aqui vai algo sobre o ping.
\subsection{Dados coletados}
\label{sub_ping_dados}
Aqui vão os dados coletados para a ferramenta ping.

\subsection{Análise}
\label{sub_ping_analise}
Aqui vai a análise dos dados coletados para a ferramenta ping.

\section{Nmap}
\label{sec_nmap}
Aqui vai algo sobre o nmap.
\subsection{Dados coletados}
\label{sub_nmap_dados}
Aqui vão os dados coletados para a ferramenta nmap.

\subsection{Análise}
\label{sub_nmap_analise}
Aqui vai a análise dos dados coletados para a ferramenta nmap.

% Referencias bibliograficas
\begin{thebibliography}{99}
\bibitem{Stewart} STEWART, James. {\sl C\'alculo.} Vol. 1. S\~ao Paulo: Pioneira, 2006.
\bibitem{IETF} IETF, Internet Engineering Task Force, RFC 1886, \url{http://tools.ietf.org/html/rfc1886}, 1995.

\bibitem{LaTeX}
\url{http://latexbr.blogspot.com}
\end{thebibliography}

\addcontentsline{toc}{chapter}{Refer\^encias Bibliogr\'aficas}

\end{document}  %Fim do documento
